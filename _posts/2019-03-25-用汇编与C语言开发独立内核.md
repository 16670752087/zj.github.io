---
categories: 操作系统
---
# 实验题目
用汇编与C语言开发独立内核
# 实验目的
1. 掌握TASM汇编语言与TURBO C语言汇合编程的方法。
2. 实现内核与引导程序分离，掌握软盘上引导操作系统方法。
3. 设计并实现一种简单的作业控制语言，建立具有较友好的控制命令的批处理原型操作系统，掌握操作系统提供用户界面和内部功能的实现方法。

# 实验要求
- 将实验二的原型操作系统分离为引导程序和MYOS内核，由引导程序加载内核，用C和汇编实现操作系统内核
- 扩展内核汇编代码，增加一些有用的输入输出函数，供C模块中调用
- 提供用户程序返回内核的一种解决方案
- 在内核的C模块中实现增加批处理能力
  - 在磁盘上建立一个表，记录用户程序的存储安排
  - 可以在控制台命令查到用户程序的信息，如程序名、字节数、在磁盘映像文件中的位置等
  - 设计一种命令，命令中可加载多个用户程序，依次执行，并能在控制台发出命令
  - 在引导系统前，将一组命令存放在磁盘映像中，系统可以解释执行

> 在实验二的基础上，进化你的原型操作系统，增加下列操作系统功能：
> 1. 将原型操作系统分离为引导程序和MYOS内核，由引导程序加载内核；
> 2. 内核由汇编语言kernal.asm和c语言kernal.c二个模块生成；
> 3. 利用C语言实现作业控制语言mJCB，原型操作系统在当前行显示一个指示符(可以是简单的一个字符或你的学号之类)，允许用户输入一行命令（回车结束，语法由你设计），操作系统解释命令并完成相应的功能(3个以上的内置功能，如time、date、asc等，而且能执行软盘上的某个用户程序)，并在你的实验报告中详细介绍你的mJCB语言的语法格式和功能。

# 实验方案
## 实验环境
### 软件
- Windows 10, 64-bit  (Build 17763) 10.0.17763
- Windows Subsystem for Linux [Ubuntu 18.04.2 LTS]：WSL是以软件的形式运行在Windows下的Linux子系统，是近些年微软推出来的新工具，可以在Windows系统上原生运行Linux。
- gcc version 7.3.0 (Ubuntu 7.3.0-27ubuntu1~18.04)：C语言程序编译器，Ubuntu自带。
- NASM version 2.13.02：汇编程序编译器，通过`sudo apt install nasm`安装在WSL上。
- Oracle VM VirtualBox 6.0.4 r128413 (Qt5.6.2)：轻量开源的虚拟机软件。
- VSCode - Insiders v1.33.0：好用的文本编辑器，有丰富的插件。
- hexdump for VSCode 1.7.2: VSCode中一个好用的十六进制显示插件。

大部分开发环境安装在WSL上，较之于双系统、虚拟机等其他开发方案，更加方便，也方便直接使用Linux下的一些指令。
### 硬件
#### 开发环境配置
所用机器型号为VAIO Z Flip 2016
- Intel(R) Core(TM) i7-6567U CPU @3.30GHZ 3.31GHz
- 8.00GB RAM

#### 虚拟机配置
- 处理器内核总数：1
- RAM：4MB

## 实验原理
### C和汇编互调
### 引导程序
### 内核

# 实验过程
