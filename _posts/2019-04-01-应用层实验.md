---
title: 应用层实验
categories: 计算机网络
---
## 实验题目
应用层实验
## 实验目的
掌握应用层的基本工作原理和实现方法
## 实验工具
### telnet
如果在命令行不能运行telnet，则需要安装telnet客户端程序。
telnet的安装方法见https://jingyan.baidu.com/article/3ea51489ba79e252e61bba97.html
   在控制台可以采用鼠标右键菜单粘贴,拷贝要点击图标菜单“编辑/标记”
    控制台修改缓冲区：属性/布局/屏幕缓冲区大小/高度:9999   窗口大小的宽度：200
### SecureCRT
-	SecureCRT 下载: http://172.18.187.9/netdisk/default.aspx?vm=17net (软件下载)
SecureCRT下载解压后直接可以使用。
-	采用SecureCRT中的telnet：连接/sessions/点击右键/新建会话/协议：telnet/下一步/主机名:域名或IP地址 端口号:80或21或110或25/下一步/取名会话/完成。
-	SecureCRT设置中文显示：选项/会话选项/外观/字体：新宋体；字符集：中文GB2312  字符编码：utf-8
-		为了可以看到更多的响应信息，需要增加缓冲区大小。
-	secureCRT:会话选项/终端/仿真/回滚缓冲区：10000
-	控制台:属性/布局/屏幕缓冲区大小/高度：9000
-	SecureCRT的SSL配置--在SecureCRT中会话配置/连接/协议：Telnet/SSL

## 注意事项
-	截屏时注意遮盖掉自己的邮箱密码
-	sina.com的邮箱的客户端访问设置：
-	QQ邮箱需要在Web访问方式下开启POP3和SMTP服务才允许在客户端访问(设置/账号/开启POP3/SMTP)，否则会出现错误“454 Authentication failed, please open smtp flag first!”
要在客户端访问，QQ邮箱可能还会要求设置独立密码，即可以设置与QQ登录不同的密码。
QQ Web邮箱查看源码的方法：
QQ邮箱编程必须使用Telnet/SSL协议(加密模式)：
SecureCRT的SSL配置--在SecureCRT中会话配置/连接/协议：Telnet/SSL
QQ邮箱的接收邮件服务器：pop.qq.com，端口号为995
QQ邮箱的发送邮件服务器：smtp.qq.com，端口号为465
客户端登录的用户名为QQ号的base64编码
客户端登录的密码也采用base64编码

## 实验内容
先认真阅读课件“Chapter2-applicaton-layer.pdf”,再完成下面内容。注意：协议标准可以查阅RFC；选取的内容不要与课件相同；响应内容太长时自己选取截取前后部分以及其中重点部分。
参考视频：http://172.18.187.9/video/
### 选做 使用自己编写的TcpClient运行步骤一~步骤四，具体见步骤六。
如果不自己编写TcpClient，可以尝试使用老师给的TcpClient.exe完成步骤一~步骤四，如果不愿意尝试，可以使用telnet来完成实验。
### 一、HTTP协议
 看完HTTP协议的课件后完成以下实验：
#### 从学院网站（sdcs.sysu.edu.cn）找一网页下载。
http请求：
202.116.64.201
```bash
GET /2012/cn/index.htm HTTP/1.1
Connection: close
Host: www.sysu.edu.cn
```
http响应：

#### 从学院网站（sdcs.sysu.edu.cn）找一图片下载。
http请求：

http响应：

#### 在http请求的头部行中加入If-Modified-Since: Fri, 16 Jan  2019 13:22:17 GMT从学院网站下载(2)的图片。
http请求：

http响应：

#### 用流水线方式实现前面（1）（2），即把它们的请求拷贝到一起后发送出去（可能太长，第一部分可以只有看到末尾）。
http请求：

http响应：

### FTP协议
看完FTP协议的课件后完成以下实验（测试服务器上的目录结构和文件见“参考资料”）：
FTP服务器：IP地址为172.18.187.10，端口号为 21 （用户名：abc，密码：123666）
#### 上传用学号命名的一个文本文件(学号.txt)
控制连接的请求响应信息：

数据连接的截屏：

#### 查看当前目录内容(太多则选择一些)，并标注出(1)中自己上传的文件
    控制连接的请求响应信息：

    数据连接的截屏：

#### 下载(1)中自己上传的文本文件
    控制连接的请求响应信息：

    数据连接的截屏：

#### 下载/ebook下的一个二进制文件(例如，.pdf文件)
    控制连接的请求响应信息：

    数据连接的截屏：

#### 采用断点续传下载一个/text下的一个文本文件的一部分
    控制连接的请求响应信息：

    数据连接的截屏：

### SMTP协议
邮箱zsusender3@sina.com的用户名zsusender3，密码：123456Aa
 看完SMTP协议的课件后做以下实验：
#### 通过zsusender3@sina.com发一封没有附件的邮件到你的邮箱。注意更改时间为当前时间。
请求和响应信息：

#### 通过zsusender3@sina.com发一封带附件(二进制文件)的邮件(MIME.txt)到你的邮箱。参考课件“MIME.pdf”和观看MIME的视频。
请求和响应信息：

#### 通过zsusender3@sina.com发送另一个带附件的邮件给自己。可以先给你自己发一封带附件的邮件,再通过查看源码截取该响应报文的一部分，参见MIME.txt。
#### (选做)从你的邮箱发一份邮件到同学的邮箱。QQ邮箱见【注意事项】。
请求和响应信息：

### POP3协议
邮箱zsureceiver3@sina.com的用户名zsureceiver3，密码：123456Aa
 看完POP3协议的课件后做以下实验：
#### 查看zsureceiver3@sina.com中每个邮件大小。
请求和响应信息：

#### 取回zsureceiver3@sina.com最后一封邮件的邮件唯一标识符。
请求和响应信息：

#### 取回zsureceiver3@sina.com最后一封邮件。
请求和响应信息：


#### 取回三(1)中发到你邮箱的邮件。QQ邮件见【注意事项】。
请求和响应信息：



### 编写一个程序（聊天程序的客户端），用FTP协议下载指定文件（选做）
参考运行截屏：

参考字符串函数：
strchr();
strrchr();
sprintf(buf, "retr %s\r\n", filename);
sscanf(st, "%d,%d,%d,%d,%d,%d", &ip1, &ip2, &ip3, &ip4, &port1, &port2);

参考自编函数：
SOCKET dataConn() { … }   建立数据连接
unsigned __stdcall myrecv(void *p){…}   接收服务器的消息（线程函数）
void sendmsg(SOCKET sock, char *msg){ … } 发送控制消息
int saveFile(SOCKET sock, char * fileName) { … } 通过数据连接接收数据并保存为文件
参考程序：ftpDownload.exe
源代码：

运行截屏：

### 采用聊天程序的客户端。该客户端采用两个进程实现：一个输入和发送线程，一个接收线程。（选做）
源代码：

# 实验体会
