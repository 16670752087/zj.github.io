---
categories: 计算机网络
---
## 实验题目
静态路由实验
## 实验目的
掌握静态路由的配置和使用方法。
## 实验命令
### 查看接口
```
#show interface
#show ip interface brief
#show ip interface f0/1
```
### 配置IP地址和子网掩码
```
(config)#interface serial 1/2                       !进行接口模式
(config-if)#ip address 192.168.1.11  255.255.255.0   !配置接口的IP地址和子网掩码
```
### 配置串口时钟和带宽
```
(config-if)#clock rate 64000               !配置时钟频率64000（在DCE上配置，DTE不用配置）
(config-if)#bandwidth 512                !配置端口的带宽速率为512KB
```
###	配置静态路由
```
(config)#ip route network net-mask next-hop  ! next-hop可以为转发的串行接口名或下一跳的IP地址
```
例：
```
ip route  192.168.3.0  255.255.255.0  192.168.2.2
ip route  192.168.3.0  255.255.255.0  S2/0
```
###	显示路由表
```
#show ip route
```
### 配置静态路由参数
```
(config)#ip route network net-mask next-hop  [distance]  [weight number]  [disable|enable]
！distance设置管理距离（默认为1），weight为权重。
! 将distance设置为一个大的值(例如，125。这大于OSPF的110)可以作为备份路由。
```
###	配置默认路由
```
(config)# ip route 0.0.0.0  0.0.0.0  next-hop
```
例：
```
ip route  0.0.0.0  0.0.0.0  192.168.2.1
```
### 配置交换机端口镜像
```
Switch(config)#monitor  session 1  source  interface  f0/15    ! 监控f0/15
Switch(config)#monitor  session 1  destination  interface  f0/5  ! 用f0/5监控
Switch(config)#show  monitor  session  1                	! 显示监控情况
Switch(config)#no  monitor  session  1                  	! 取消监控
```
## 实验说明
-	配置前先重启路由器`#reload`
-	参与ping的主机要删除校园网网关。
-	注意关闭Windows的防火墙

## 实验任务

由于实际上所用的接口名不一定是上面标明的，先用#show interface查看接口名，并根据实际接线修改上图的接口和IP地址标记。
配置好PC机实验网网卡的IP地址、子网掩码和默认网关，按下面步骤依次进行配置和检测：
### 配置Router1和Router2的IP地址和子网掩码 (见上面“实验命令”)。
#### 显示Router1的路由表并截屏

#### 显示Router2的路由表并截屏

#### PC1依次ping 到PC2路经上的所有IP地址，并截屏

#### 分析Router1路由表和Router2路由表的路由组成

### 在Router1和Router2上配置静态路由(见上面命令或课件)，要求PC1可以ping通PC2。
#### 显示Router1的路由表并截屏

#### 显示Router2的路由表并截屏

#### PC1 ping PC2 并截屏

#### 分析Router1路由表和Router2路由表的路由组成

### 如果只在Router1上配置静态路由（删除Router2上配置的静态路由）, PC1和PC2都ping到对方路径上的IP地址，最远可以ping通哪个接口？为什么？
删除配置命令的方法是在原配置命令前加no（和一个空格）。用上下键可以显示出历史命令。
#### PC1依次ping 到PC2路经上的所有IP地址，并截屏

#### PC2依次ping 到PC1路经上的所有IP地址，并截屏

#### 分析结果

### 如果在路由器Router1和Router2只配置默认路由指向对方（要先删除原静态路由），PC1是否可以ping通PC2？为什么？写下分析。
#### PC1 ping PC2，并截屏

#### 显示Router1的路由表并截屏

#### 分析结果

### 在路由器之间加入一台交换机Switch1（不用配置），并连上一台主机（PC3），见下图。在Switch1上配置端口镜像(见上面“实验命令”)，捕捉经过F0/15的IP分组，并送往F0/5， PC3可以用WireShark捕捉ICMP包（filter：ip.proto==1）。

#### 用PC1 ping一个外部网络的无主IP地址会出现什么现象？截屏并分析结果

### 见下图，拆除Router1和Router2之间的以太网线，并用串行接口做实验，串行接口已经接好了，但不一定是下图标志的名称，要用#show interface（或#show ip interface brief或#show ip interface s0/1）查看哪个串行接口已经接好(line is up，protocol is up)。配置Router1和Router2串行口的时钟、IP地址和子网掩码，删除默认路由，配置静态路由(见上面命令或课件)，令PC1可以ping通PC2。

#### 用PC1 ping PC2并截屏

#### 显示Router1的路由表并截屏

#### 显示Router2的路由表并截屏

#### 用#show running-config显示Router1的当前配置，并粘贴在下面

#### 用#show running-config显示Router2的当前配置，并粘贴在下面

## 实验体会
